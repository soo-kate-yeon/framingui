---
title: "AI コード生成とデザイントークン: なぜハルシネーションが起きるのか"
description: "AI 生成 UI がトークンなしで崩れる理由と、トークン駆動コンテキストで一貫性を上げる方法を解説します。"
date: "2026-02-28"
author:
  name: "FramingUI Team"
tags:
  - ai-code-generation
  - design-tokens
  - design-system
  - llm
category: "Technical"
coverImage: ""
published: true
---

## なぜ AI 生成 UI は不安定になるのか

AI は文脈が足りないと、色・余白・タイポグラフィを推測で埋めます。結果として、画面ごとに見た目が微妙にずれていきます。

- ボタン色が毎回違う
- 余白スケールが統一されない
- 似たコンポーネントでも構造が揃わない

この状態を防ぐには、AI が参照できる「正解データ」を先に渡す必要があります。

## 正解データはデザイントークン

デザイントークンは、UI の判断をコード化した共通ルールです。

```ts
export const tokens = {
  color: {
    primary: 'oklch(0.62 0.16 252)',
    surface: 'oklch(0.98 0.01 250)',
  },
  spacing: {
    2: '0.5rem',
    4: '1rem',
    6: '1.5rem',
  },
}
```

トークンを使うと、AI は推測ではなく参照ベースで出力できます。

## ハルシネーションを減らす実装パターン

### 1. Token-First で設計する

最初にトークンを定義し、コンポーネントは必ずトークン参照にします。

### 2. MCP で AI に公開する

MCP 経由で AI ツールにトークン情報を渡します。

### 3. 生成後チェックを自動化する

- ハードコード色の検出
- 禁止値（px 直打ちなど）の検出
- 命名規約の検証

## 生成品質の比較

| 条件 | 生成結果 |
| --- | --- |
| トークンなし | 見た目は早いが、整合性が下がる |
| トークンあり | 速度と一貫性を両立しやすい |
| トークン + MCP | チーム運用でも再現性が高い |

## 実務での運用ポイント

1. トークンは少数から始める
2. コンポーネント API を固定する
3. 生成ルールをプロンプトで明文化する
4. 破壊的変更はバージョンで管理する

## まとめ

AI コード生成の品質は、モデル性能だけで決まりません。設計データをどこまで明示できるかで差が出ます。デザイントークンを中心に据えると、生成速度を落とさずに UI 品質を安定させやすくなります。
