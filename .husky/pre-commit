#!/bin/sh
#
# Pre-commit Hook - Fast & Light
# Local quick checks only. Heavy checks delegated to CI/CD.
#

# 1. TAG ê²€ì¦ (ë¹ ë¦„)
echo "ğŸ·ï¸  Validating TAG annotations..."
pnpm run validate:tags || {
  echo "âŒ TAG validation failed. Please add TAG annotations."
  echo "ğŸ’¡ See docs/quality/tag-system.md for details."
  exit 1
}

# 2. tsup + composite í˜¸í™˜ì„± ê²€ì‚¬ (ë¹ ë¦„)
echo "ğŸ” Checking tsup + TypeScript composite compatibility..."
pnpm check:tsup || exit 1

# 3. Lint-staged (ESLint + Prettier, ë³€ê²½ëœ íŒŒì¼ë§Œ)
echo "ğŸ“ Running lint-staged (ESLint + Prettier)..."
pnpm exec lint-staged || exit 1

echo "âœ… Pre-commit checks passed!"
echo ""
echo "ğŸ’¡ Full build, type-check, and tests will run in CI/CD"
echo "   Run 'pnpm ci:local' to test locally before pushing"
